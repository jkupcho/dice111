"use strict";var Game=React.createClass({displayName:"Game",defaultState:{players:[],activePlayer:{},gameWon:!1,currentActive:0,gameStarted:!1,winner:{},winningScore:111},getInitialState:function(){return this.defaultState},nextPlayer:function(){var a=this.state.currentActive,b=this.state.players[a];b.isActive=!1,b.score+=b.currentScore,b.currentScore=0,a===this.state.players.length-1?a=0:++a;var b=this.state.players[a];b.isActive=!0,this.setState({activePlayer:b,currentActive:a})},rollDie:function(a){var b=this.state.activePlayer;1===a?b.currentScore=0:b.currentScore+=a,this.setState(b.score+b.currentScore>=111?{gameWon:!0,winner:b}:{activePlayer:b})},gameStartedHandler:function(a){a.preventDefault(),this.setState({gameStarted:!0,activePlayer:this.state.players[this.state.currentActive]}),this.state.players[this.state.currentActive].isActive=!0},entryHandle:function(a){var b=this.state.players;b.push({name:a,score:0,currentScore:0}),this.setState({players:b})},newGame:function(){var a=[];this.state.players.forEach(function(b){b.score=0,b.currentScore=0,b.isActive=!1,a.push(b)}),this.setState(this.defaultState)},render:function(){var a;return a=this.state.gameStarted?this.state.gameWon?React.createElement("div",{className:"well"},this.state.activePlayer.name," won! Congrats!",React.createElement("button",{className:"btn btn-info btn-lg",onClick:this.newGame},"New Game")):React.createElement(GameBoard,{activePlayer:this.state.activePlayer,rollDie:this.rollDie,nextPlayer:this.nextPlayer}):React.createElement(PlayerEntry,{playerName:this.state.playerName,entryHandle:this.entryHandle,canStart:this.state.players.length>1,gameStartedHandler:this.gameStartedHandler}),React.createElement("div",null,React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-8"},a),React.createElement("div",{className:"col-md-4"},React.createElement(PlayerList,{players:this.state.players,showScore:this.state.gameStarted}))))}}),GameBoard=React.createClass({displayName:"GameBoard",getInitialState:function(){return{currentRoll:0}},nextPlayer:function(){this.setState({currentRoll:0}),this.props.nextPlayer()},rollDie:function(a){a.preventDefault();var b=Math.floor(6*Math.random()+1);this.setState({currentRoll:b}),this.props.rollDie(b)},render:function(){var a;return a=0===this.state.currentRoll?React.createElement("h3",null,"Roll to start, ",this.props.activePlayer.name,"!"):1===this.state.currentRoll?React.createElement("h3",null,"You rolled a 1, bummer dude! Switching to next player."):React.createElement("h3",null,"You rolled a ",this.state.currentRoll,", keep going!"),React.createElement("div",{className:"text-center"},a,1!==this.state.currentRoll?React.createElement("button",{className:"btn btn-primary btn-lg",onClick:this.rollDie},"Roll!"):null,0!==this.state.currentRoll?React.createElement("button",{className:"btn btn-danger btn-lg",onClick:this.nextPlayer},"Pass Dice"):null)}}),PlayerEntry=React.createClass({displayName:"PlayerEntry",handleEntry:function(a){a.preventDefault();var b=this.refs.playerEntryText.getDOMNode().value;""!==b&&void 0!==b&&(this.props.entryHandle(this.refs.playerEntryText.getDOMNode().value),this.refs.playerEntryText.getDOMNode().value="",$(this.refs.playerEntryText.getDOMNode()).focus())},render:function(){var a;return this.props.canStart&&(a=React.createElement("button",{className:"btn btn-default pull-right",onClick:this.props.gameStartedHandler},"Start Game!")),React.createElement("div",null,React.createElement("form",{className:"form-inline"},React.createElement("div",{className:"input-group"},React.createElement("input",{type:"text",className:"form-control",ref:"playerEntryText",placeholder:"Player Name"}),React.createElement("span",{className:"input-group-btn"},React.createElement("button",{className:"btn btn-info",onClick:this.handleEntry},React.createElement("span",{className:"glyphicon glyphicon-plus"})))),a))}}),PlayerList=React.createClass({displayName:"PlayerList",render:function(){var a=[],b=this.props.showScore;this.props.players.forEach(function(c){a.push(React.createElement(Player,{player:c,showScore:b}))});var c;return c=0===a.length?React.createElement("span",null,"No Players"):React.createElement("div",null,React.createElement("h5",null,"Players"),React.createElement("ul",{className:"list-group"},a)),React.createElement("div",{className:"well"},c)}}),Player=React.createClass({displayName:"Player",render:function(){return React.createElement("li",{className:this.props.player.isActive?"list-group-item active":"list-group-item"},this.props.player.name,this.props.showScore?React.createElement("span",null," - ",this.props.player.score):null,this.props.player.isActive?React.createElement("span",null," (",this.props.player.currentScore,")"):null)}});React.render(React.createElement(Game,null),document.getElementById("game"));